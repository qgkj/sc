function _hash() {
    var e = location.hash.substr(1)
        , t = {};
    if (e)
        for (var n = e.split("&"), i = 0; i < n.length; i++) {
            var o = n[i].split("=");
            t[o[0]] = o[1]
        }
    if ("string" == typeof arguments[0])
        return t[arguments[0]];
    if ("object" == typeof arguments[0]) {
        for (var r in arguments[0])
            t[r] = arguments[0][r];
        var a = "";
        for (var r in t)
            a += r + "=" + t[r] + "&";
        location.href = "#" + a.substring(0, a.length - 1)
    }
}
function TTArticleInit(e) {
    function t(e) {
        ["s", "m", "l", "xl"].indexOf(e) > -1 && (r(p, "font_s font_m font_l font_xl"),
            o(p, "font_" + e))
    }
    function n(e, t) {
        ["0", "1", 0, 1].indexOf(e) < 0 || (e = parseInt(e),
            e ? r(p, "night") : o(p, "night"),
        t && t(e))
    }
    function i(e, t) {
        return e.className.match(new RegExp("(\\s|^)" + t + "(\\s|$)"))
    }
    function o(e, t) {
        t.split(/\s+/).forEach(function(t) {
            i(e, t) || (e.className += " " + t)
        })
    }
    function r(e, t) {
        t.split(/\s+/).forEach(function(t) {
            var n = new RegExp("(\\s|^)" + t + "(\\s|$)");
            e.className = e.className.replace(n, " ")
        })
    }
    function a() {
        var e = _hash("tt_daymode")
            , i = _hash("tt_font");
        e && n(e),
        i && t(i)
    }
    function l(e) {
        var t = e.getBoundingClientRect();
        return (t.top >= 0 && t.left >= 0 && t.top) <= (window.innerHeight || document.documentElement.clientHeight) + m
    }
    function s() {
        var e = "alt-src"
            , t = ""
            , n = document.querySelectorAll("[" + e + "]")
            , i = [];
        n.length || window.removeEventListener("scroll", s);
        for (var o = 0; o < n.length; o++)
            i.push(n[o]);
        for (; i.length; ) {
            var r = i.shift()
                , a = r.getAttribute(e);
            r && a && l(r) && r.setAttribute("src", a + t)
        }
    }
    function c(e) {
        e.removeAttribute("onload"),
            e.removeAttribute("style"),
            e.removeAttribute("alt-src"),
            e.setAttribute("class", "loaded")
    }
    function u() {
        for (var t = document.body.clientWidth - 30, n = e.querySelectorAll("figure img"), i = 0; i < n.length; i++) {
            var o = n[i]
                , r = parseInt(o.getAttribute("width") || 0)
                , a = parseInt(o.getAttribute("height") || 0);
            o.removeAttribute("width"),
                o.removeAttribute("height");
            var l = document.createElement("div");
            if (l.className = "img-holder",
                    o.parentNode.appendChild(l),
                    o.setAttribute("onload", "TouTiao.resetImage(this)"),
                    l.appendChild(o),
                    r) {
                var c = Math.min(r, t)
                    , u = parseInt(c * a / r);
                l.style.width = c + "px",
                    l.style.height = u + "px"
            }
        }
        window.addEventListener("scroll", s)
    }
    function d() {
        a(),
            u(),
            s()
    }
    var p = document.body;
    p.style.background = "none",
        document.querySelector("html").style.background = "none",
        e.id = "article";
    var m = 500
        , f = {
        setFontSize: t,
        setDayMode: n,
        resetImage: c
    };
    window.TouTiao = f,
        document.addEventListener("DOMContentLoaded", d, !1)
}
function prepareUI(e) {
    var t = document.title.trim()
        , n = /Android/g.test(navigator.userAgent)
        , i = ""
        , o = e.querySelectorAll("figure")
        , r = []
        , a = Math.min(innerWidth, innerHeight);
    n && console.log("bytedance://domReady"),
    t || (t = e.querySelector("h1").innerHTML.trim());
    for (var l = 0; l < o.length; l++) {
        var s = o[l]
            , c = s.querySelector("figcaption")
            , u = s.querySelector("img")
            , d = "";
        if (u) {
            var p = u.getAttribute("alt-src");
            p && (c && (d = c.innerText.replace(/\s*/g, "")),
            l || (i = d),
                r.push({
                    src: u.getAttribute("alt-src") || "",
                    description: d || " ",
                    h: parseInt(u.getAttribute("height") || a),
                    w: parseInt(u.getAttribute("width") || a)
                }))
        }
    }
    var m = ".pswp__desc_con{margin:10px auto 0 auto; padding:0 15px; color: #cacaca; font-size: 16px; line-height: 22px; max-height:178px; overflow: hidden; display: -webkit-box; -webkit-box-orient: vertical; overflow: scroll; overflow-x: hidden; -webkit-overflow-scrolling:touch; }.pswp__desc_con::-webkit-scrollbar {width: 3px; }.pswp__desc_con::-webkit-scrollbar-thumb:vertical {width: 3px; background: rgba(255,255,255,.2); border-radius: 3px; }.pswp__counter-new {margin-right: .5em;}.pswp__counter-new i{font-style: normal; font-size: 12px }.pswp__desc-new{ pointer-events: none;}.landscape .pswp__desc_con{max-height: 90px;}.landscape .pswp__bottom-bar{ padding-bottom:10px}.landscape .pswp__relate{max-width: 75%;}.landscape .pswp__relate .pswp__relate-item{width: 33%; margin-right: 0.5%; }.landscape .pswp__relate .pswp__relate-item:nth-child(2n){margin-right: 0.5%}.landscape .pswp__relate .pswp__relate-item:nth-child(3n){margin-right: 0 }.landscape .pswp__relate .pswp__relate-item:nth-child(4n){clear:left }.pswp__error-msg {margin-top: -25px; margin-left: -40px; width: 80px; height: 30px; background-position: center top; background-size: 65px; padding-top: 60px; box-sizing: content-box; text-align: center; }.pswp__error-msg button{font-size: 14px; line-height: 2em; padding: 0 10px; color:#cacaca; border: none; border-radius: 3px; background: none; }"
        , f = document.createElement("style");
    f.innerHTML = m,
        document.head.appendChild(f);
    var h = '<div class="pswp__bg"></div><div class="pswp__scroll-wrap"><div class="pswp__container"><div class="pswp__item"></div><div class="pswp__item"></div><div class="pswp__item"></div></div><div class="pswp__ui pswp__ui--visible"><div class="pswp__top-gradient"></div><div class="pswp__preloader pswp__preloader--active"></div><div class="pswp__bottom-bar"><div class="pswp__desc_con"><span class="pswp__counter-new"></span><span class="pswp__desc-new"></span></div></div></div></div>';
    e.innerHTML = h,
        e.setAttribute("class", "pswp pswp--css_animation"),
        e.removeAttribute("id"),
        document.head.insertAdjacentHTML("beforeEnd", '<meta name="pathname" content="/dingzhi/gallery/">');
    var g = document.querySelector(".pswp__top-gradient")
        , v = _hash("descpadding");
    v && (f.innerHTML += ".pswp__relate, .pswp__bottom-bar{ padding-left:" + v + "px; padding-right:" + v + "px}"),
    n && (g.style.height = "44px"),
        TTGallery.items = r,
        TTGallery.title = t,
        TTGallery.rootElement = document.querySelector(".pswp")
}
function errorimg() {
    this.style.opacity = "0"
}
function getRelateSlidesHTML(e) {
    var t = ""
        , n = 4;
    innerHeight > 1.35 * innerWidth && (n = 6),
    innerWidth > innerHeight && (n = 6),
    "string" == typeof e && (t = e);
    for (var i = "<div class='pswp__relate-item'><a href='$open_url' class='pswp__relate-link'><div class='pswp__relate-image pswp__img--placeholder--blank'><img src='$image_url' onerror='errorimg.call(this)'></div><div class='pswp__relate-title line2'>$title</div></a></div>", o = 0; n > o; o++) {
        var r = e[o];
        r && (t += i.replace("$open_url", e[o].open_url || "").replace("$title", e[o].title || "").replace("$image_url", e[o].middle_image.url || ""))
    }
    return "<div class='pswp__relate clearfix'>" + t + "</div>"
}
function PhotoSwipe(e, t, n, i) {
    var o = {
        features: null ,
        timestamp: function() {
            return +new Date
        },
        bind: function(e, t, n, i) {
            var o = (i ? "remove" : "add") + "EventListener";
            t = t.split(" ");
            for (var r = 0; r < t.length; r++)
                t[r] && e[o](t[r], n, !1)
        },
        isArray: function(e) {
            return e instanceof Array
        },
        createEl: function(e, t) {
            var n = document.createElement(t || "div");
            return e && (n.className = e),
                n
        },
        unbind: function(e, t, n) {
            o.bind(e, t, n, !0)
        },
        removeClass: function(e, t) {
            var n = new RegExp("(\\s|^)" + t + "(\\s|$)");
            e.className = e.className.replace(n, " ").replace(/^\s\s*/, "").replace(/\s\s*$/, "")
        },
        addClass: function(e, t) {
            o.hasClass(e, t) || (e.className += (e.className ? " " : "") + t)
        },
        hasClass: function(e, t) {
            return e.className && new RegExp("(^|\\s)" + t + "(\\s|$)").test(e.className)
        },
        getChildByClass: function(e, t) {
            for (var n = e.firstChild; n; ) {
                if (o.hasClass(n, t))
                    return n;
                n = n.nextSibling
            }
        },
        hash: function() {
            var e = location.hash.substr(1)
                , t = {};
            if (e)
                for (var n = e.split("&"), i = 0; i < n.length; i++) {
                    var o = n[i].split("=");
                    t[o[0]] = o[1]
                }
            if ("string" == typeof arguments[0])
                return t[arguments[0]];
            if ("object" == typeof arguments[0]) {
                for (var r in arguments[0])
                    t[r] = arguments[0][r];
                var a = "";
                for (var r in t)
                    a += r + "=" + t[r] + "&";
                location.href = "#" + a.substring(0, a.length - 1)
            }
        },
        arraySearch: function(e, t, n) {
            for (var i = e.length; i--; )
                if (e[i][n] === t)
                    return i;
            return -1
        },
        extend: function(e, t, n) {
            for (var i in t)
                if (t.hasOwnProperty(i)) {
                    if (n && e.hasOwnProperty(i))
                        continue;e[i] = t[i]
                }
            return e
        },
        loadScript: function(e, t) {
            var n, i = document.head;
            n = document.createElement("script"),
                n.async = !1,
                n.type = "text/javascript",
                n.charset = "utf-8",
                n.src = e,
                i.insertBefore(n, i.firstChild),
            t && n.addEventListener("load", t, !1)
        },
        easing: {
            sine: {
                out: function(e) {
                    return Math.sin(e * (Math.PI / 2))
                },
                inOut: function(e) {
                    return -(Math.cos(Math.PI * e) - 1) / 2
                }
            },
            cubic: {
                out: function(e) {
                    return --e * e * e + 1
                }
            }
        },
        detectFeatures: function() {
            if (o.features)
                return o.features;
            var e = o.createEl()
                , t = e.style
                , n = ""
                , i = {};
            i.touch = "ontouchstart"in window,
            window.requestAnimationFrame && (i.raf = window.requestAnimationFrame,
                i.caf = window.cancelAnimationFrame);
            var r = navigator.userAgent;
            if (i.isToutiao = /NewsArticle/g.test(r),
                    i.isToutiao) {
                var a = /NewsArticle\/([^\s]*)/i.exec(r);
                a && (i.toutiaoVersion = parseFloat(a[1]),
                    i.isOldToutiao = i.toutiaoVersion < 4.9)
            }
            if (i.isWeixin = /MicroMessenger/g.test(r),
                    i.pointerEvent = navigator.pointerEnabled || navigator.msPointerEnabled,
                    i.isAndroid = /android/i.test(r),
                    i.isiOS = /iphone|ipad|ipod/i.test(r),
                    /iP(hone|od|ad)/.test(navigator.platform)) {
                var l = navigator.appVersion.match(/OS (\d+)_(\d+)_?(\d+)?/);
                l && l.length > 0 && (l = parseInt(l[1], 10),
                l >= 1 && 8 > l && (i.isOldIOSPhone = !0))
            }
            var s = r.match(/Android\s([0-9\.]*)/)
                , c = s ? s[1] : 0;
            c = parseFloat(c),
            c >= 1 && (4.4 > c && (i.isOldAndroid = !0),
                i.androidVersion = c);
            for (var u, d, p = ["transform", "perspective", "animationName", "boxAlign"], m = ["", "webkit"], f = 0; 2 > f; f++) {
                n = m[f];
                for (var h = 0; h < p.length; h++)
                    u = p[h],
                        d = n + (n ? u.charAt(0).toUpperCase() + u.slice(1) : u),
                    !i[u] && d in t && (i[u] = d);
                n && !i.raf && (n = n.toLowerCase(),
                    i.raf = window[n + "RequestAnimationFrame"],
                i.raf && (i.caf = window[n + "CancelAnimationFrame"] || window[n + "CancelRequestAnimationFrame"]))
            }
            if (!i.raf) {
                var g = 0;
                i.raf = function(e) {
                    var t = (new Date).getTime()
                        , n = Math.max(0, 16 - (t - g))
                        , i = window.setTimeout(function() {
                        e(t + n)
                    }, n);
                    return g = t + n,
                        i
                }
                    ,
                    i.caf = function(e) {
                        clearTimeout(e)
                    }
            }
            return o.features = i,
                i
        }
    }
        , r = this
        , a = 25
        , l = 3
        , s = {
        allowPanToNext: !0,
        spacing: .12,
        bgOpacity: 1,
        loop: !0,
        pinchToClose: !0,
        closeOnScroll: !0,
        closeOnVerticalDrag: !0,
        verticalDragRange: .75,
        showHideOpacity: !1,
        escKey: !0,
        arrowKeys: !0,
        mainScrollEndFriction: .35,
        panEndFriction: .35,
        isInlineScrollElement: function(e) {
            return e.getAttribute("inline-scroll")
        },
        isReloadButton: function(e) {
            return "pswp__error-retry" == e.className
        },
        isLinkElement: function(e) {
            return e.href
        },
        getDoubleTapZoom: function(e) {
            return e.initialZoomLevel < .7 ? 1 : 1.33
        },
        maxSpreadZoom: 1.33
    };
    o.extend(s, i);
    {
        var c, u, d, p, m, f, h, g, v, x, y, w, _, T, b, I, C, E, S, A, M, O, R, D, L, k, N, G, F, P, z, Z, H, B, q, W, U, j, V, $, Y, J, K, X, Q, et, tt, nt, it = function() {
                return {
                    x: 0,
                    y: 0
                }
            }
            , ot = it(), rt = it(), at = it(), lt = {}, st = 0, ct = {}, ut = it(), dt = 0, pt = !0, mt = [], ft = {}, ht = !1, gt = function(e, t) {
                o.extend(r, t.publicMethods),
                    mt.push(e)
            }
            , vt = function(e) {
                var t = Zn();
                return e > t - 1 ? e - t : 0 > e ? t + e : e
            }
            , xt = {}, yt = function(e, t) {
                return xt[e] || (xt[e] = []),
                    xt[e].push(t)
            }
            , wt = function(e) {
                var t = xt[e];
                if (t) {
                    var n = Array.prototype.slice.call(arguments);
                    n.shift();
                    for (var i = 0; i < t.length; i++)
                        t[i].apply(r, n)
                }
            }
            , _t = function() {
                return (new Date).getTime()
            }
            , Tt = function(e, t, n, i, o) {
                (!ht || o && o !== r.currItem) && (i /= o ? o.fitRatio : r.currItem.fitRatio),
                    e[A] = y + t + "px, " + n + "px" + w + " scale(" + i + ")"
            }
            , bt = function(e) {
                K && (e && (v > r.currItem.fitRatio ? ht || (Qn(r.currItem, !1, !0),
                    ht = !0) : ht && (Qn(r.currItem),
                    ht = !1)),
                    Tt(K, at.x, at.y, v))
            }
            , It = function(e) {
                e.container && Tt(e.container.style, e.initialPosition.x, e.initialPosition.y, e.initialZoomLevel, e)
            }
            , Ct = function(e, t) {
                t[A] = y + e + "px, 0px" + w
            }
            , Et = function(e, t) {
                if (t) {
                    var n = d + (ut.x * st - e) / ut.x
                        , i = Math.round(e - sn.x);
                    (0 > n && i > 0 || n >= Zn() - 1 && 0 > i) && (e = sn.x + i * s.mainScrollEndFriction)
                }
                sn.x = e,
                    Ct(e, p)
            }
            , St = function(e, t) {
                var n = cn[e] - ct[e];
                return rt[e] + ot[e] + n - n * (t / x)
            }
            , At = function(e, t) {
                e.x = t.x,
                    e.y = t.y,
                t.id && (e.id = t.id)
            }
            , Mt = function(e) {
                e.x = Math.round(e.x),
                    e.y = Math.round(e.y)
            }
            , Ot = function() {
                o.bind(document, "keydown", r),
                L.transform && o.bind(r.scrollWrap, "click", r),
                    o.bind(window, "resize scroll", r),
                    wt("bindEvents")
            }
            , Rt = function(e, t) {
                var n = $n(r.currItem, lt, e);
                return t && (J = n),
                    n
            }
            , Dt = function(e) {
                return e || (e = r.currItem),
                    e.initialZoomLevel
            }
            , Lt = function(e) {
                return e || (e = r.currItem),
                    e.w > 0 ? s.maxSpreadZoom : 1
            }
            , kt = function(e, t, n, i) {
                return i === r.currItem.initialZoomLevel ? (n[e] = r.currItem.initialPosition[e],
                    !0) : (n[e] = St(e, i),
                    n[e] > t.min[e] ? (n[e] = t.min[e],
                        !0) : n[e] < t.max[e] ? (n[e] = t.max[e],
                        !0) : !1)
            }
            , Nt = function() {
                var e = L.perspective;
                y = "translate" + (e ? "3d(" : "("),
                    w = L.perspective ? ", 0px)" : ")"
            }
            , Gt = function(e) {
                e && (B || H || X) && (e.preventDefault(),
                    e.stopPropagation())
            }
            , Ft = function() {
                r.setPortraitOrLandscape()
            }
            , Pt = function() {
                r.setScrollOffset(0, window.scrollY)
            }
            , zt = {}, Zt = 0, Ht = function(e) {
                zt[e] && (zt[e].raf && O(zt[e].raf),
                    Zt--,
                    delete zt[e])
            }
            , Bt = function(e) {
                zt[e] && Ht(e),
                zt[e] || (Zt++,
                    zt[e] = {})
            }
            , qt = function() {
                for (var e in zt)
                    zt.hasOwnProperty(e) && Ht(e)
            }
            , Wt = function(e, t, n, i, o, r, a) {
                var l, s = _t();
                Bt(e);
                var c = function() {
                        if (zt[e]) {
                            if (l = _t() - s,
                                l >= i)
                                return Ht(e),
                                    r(n),
                                    void (a && a());
                            r((n - t) * o(l / i) + t),
                                zt[e].raf = M(c)
                        }
                    }
                    ;
                c()
            }
            , Ut = {
                shout: wt,
                listen: yt,
                viewportSize: lt,
                options: s,
                init: function() {
                    if (!c && !u) {
                        var n;
                        for (r.framework = o,
                                 r.template = e,
                                 r.bg = o.getChildByClass(e, "pswp__bg"),
                                 R = e.className,
                                 c = !0,
                                 L = o.detectFeatures(),
                                 M = L.raf,
                                 O = L.caf,
                                 A = L.transform,
                                 r.scrollWrap = o.getChildByClass(e, "pswp__scroll-wrap"),
                                 r.container = o.getChildByClass(r.scrollWrap, "pswp__container"),
                                 p = r.container.style,
                                 r.itemHolders = T = [{
                                     el: r.container.children[0],
                                     wrap: 0,
                                     index: -1
                                 }, {
                                     el: r.container.children[1],
                                     wrap: 0,
                                     index: -1
                                 }, {
                                     el: r.container.children[2],
                                     wrap: 0,
                                     index: -1
                                 }],
                                 Nt(),
                                 g = {
                                     resize: r.updateSize,
                                     scroll: Pt,
                                     click: Gt
                                 },
                                 n = 0; n < mt.length; n++)
                            r["init" + mt[n]]();
                        if (t) {
                            var i = r.ui = new t(r,o);
                            i.init()
                        }
                        d = d || s.index || 0,
                        (isNaN(d) || 0 > d || d >= Zn()) && (d = 0),
                            r.currItem = zn(d),
                        (L.isOldIOSPhone || L.isOldAndroid) && (pt = !1),
                            e.setAttribute("aria-hidden", "false"),
                            e.style.position = "fixed",
                        void 0 === D && (wt("initialLayout"),
                            D = 0);
                        var a = "pswp--open ";
                        for (s.mainClass && (a += s.mainClass + " "),
                             s.showHideOpacity && (a += "pswp--animate_opacity "),
                             L.isToutiao && (a += L.isOldToutiao ? "pswp--news_article_old " : "pswp--news_article "),
                             L.isWeixin && (a += "pswp--weixin "),
                                 a += L.animationName ? " pswp--css_animation" : "",
                                 o.addClass(e, a),
                                 r.updateSize(),
                                 m = -1,
                                 dt = null ,
                                 n = 0; l > n; n++)
                            Ct((n + m) * ut.x, T[n].el.style);
                        o.bind(r.scrollWrap, h, r),
                            yt("initialZoomInEnd", function() {
                                r.setContent(T[2], d + 1),
                                    Ot()
                            }),
                            r.setContent(T[1], d),
                            r.updateCurrItem(),
                            wt("afterInit"),
                            o.addClass(e, "pswp--visible")
                    }
                },
                isMainScrollAnimating: function() {
                    return X
                },
                getZoomLevel: function() {
                    return v
                },
                getCurrentIndex: function() {
                    return d
                },
                isDragging: function() {
                    return z
                },
                isZooming: function() {
                    return V
                },
                setScrollOffset: function(e, t) {
                    ct.x = e,
                        D = ct.y = t,
                        wt("updateScrollOffset", ct)
                },
                setPortraitOrLandscape: function() {
                    var e = innerWidth > innerHeight ? "addClass" : "removeClass";
                    o[e](r.container.parentNode, "landscape")
                },
                applyZoomPan: function(e, t, n, i) {
                    at.x = t,
                        at.y = n,
                        v = e,
                        bt(i)
                },
                panTo: function(e, t, n) {
                    n || (e > J.min.x ? e = J.min.x : e < J.max.x && (e = J.max.x),
                        t > J.min.y ? t = J.min.y : t < J.max.y && (t = J.max.y)),
                        at.x = e,
                        at.y = t,
                        bt()
                },
                handleEvent: function(e) {
                    e = e || window.event,
                    g[e.type] && g[e.type](e)
                },
                goTo: function(e) {
                    e = vt(e);
                    var t = e - d;
                    dt = t,
                        d = e,
                        r.currItem = zn(d),
                        st -= t,
                        Et(ut.x * st),
                        qt(),
                        X = !1,
                        r.updateCurrItem()
                },
                next: function() {
                    r.goTo(d + 1)
                },
                prev: function() {
                    r.goTo(d - 1)
                },
                updateCurrZoomItem: function(e) {
                    if (e && wt("beforeChange", 0),
                            T[1].el.children.length) {
                        var t = T[1].el.children[0];
                        K = o.hasClass(t, "pswp__zoom-wrap") ? t.style : null
                    } else
                        K = null ;
                    0 == r.currItem.zoom && (K = null ),
                        J = r.currItem.bounds,
                        x = v = r.currItem.initialZoomLevel,
                        at.x = J.center.x,
                        at.y = J.center.y,
                    e && wt("afterChange")
                },
                invalidateCurrItems: function() {
                    _ = !0;
                    for (var e = 0; l > e; e++)
                        T[e].item && (T[e].item.needsUpdate = !0)
                },
                reloadCurrItem: function() {
                    var e = r.currItem;
                    e.loadError && (e.loaded = !1,
                        e.loading = !1,
                        e.loadError = !1,
                        r.setContent(r.itemHolders[1], d))
                },
                updateCurrItem: function(e) {
                    if (0 !== dt) {
                        var t, n = Math.abs(dt);
                        if (!(e && 2 > n)) {
                            r.currItem = zn(d),
                                ht = !1,
                                wt("beforeChange", dt),
                            n >= l && (m += dt + (dt > 0 ? -l : l),
                                n = l);
                            for (var i = 0; n > i; i++)
                                dt > 0 ? (t = T.shift(),
                                    T[l - 1] = t,
                                    m++,
                                    Ct((m + 2) * ut.x, t.el.style),
                                    r.setContent(t, d - n + i + 1 + 1)) : (t = T.pop(),
                                    T.unshift(t),
                                    m--,
                                    Ct(m * ut.x, t.el.style),
                                    r.setContent(t, d + n - i - 1 - 1));
                            if (K && 1 === Math.abs(dt)) {
                                var o = zn(b);
                                o.initialZoomLevel !== v && ($n(o, lt),
                                    Qn(o),
                                    It(o))
                            }
                            dt = 0,
                                r.updateCurrZoomItem(),
                                b = d,
                                wt("afterChange")
                        }
                    }
                },
                updateSize: function(t) {
                    if (!pt) {
                        if (D !== window.scrollY && (e.style.top = window.scrollY + "px",
                                D = window.scrollY),
                            !t && ft.x === window.innerWidth && ft.y === window.innerHeight)
                            return;
                        ft.x = window.innerWidth,
                            ft.y = window.innerHeight,
                            e.style.height = ft.y + "px"
                    }
                    if (lt.x = r.scrollWrap.clientWidth,
                            lt.y = r.scrollWrap.clientHeight,
                            Pt(),
                            Ft(),
                            ut.x = lt.x + Math.round(lt.x * s.spacing),
                            ut.y = lt.y,
                            Et(ut.x * st),
                            wt("beforeResize"),
                        void 0 !== m) {
                        for (var n, i, o, a = 0; l > a; a++)
                            n = T[a],
                                Ct((a + m) * ut.x, n.el.style),
                                o = d + a - 1,
                                i = zn(o),
                                i && (_ || i.needsUpdate || !i.bounds) ? (r.cleanSlide(i),
                                    r.setContent(n, o),
                                1 === a && (r.currItem = i,
                                    r.updateCurrZoomItem(!0)),
                                    i.needsUpdate = !1) : -1 === n.index && o >= 0 && r.setContent(n, o),
                            i && i.container && ($n(i, lt),
                                Qn(i),
                                It(i));
                        _ = !1
                    }
                    x = v = r.currItem.initialZoomLevel,
                        J = r.currItem.bounds,
                    J && (at.x = J.center.x,
                        at.y = J.center.y,
                        bt(!0)),
                        wt("resize")
                },
                zoomTo: function(e, t, n, i, r) {
                    wt(1 == e ? "zoomIn" : "zoomOut"),
                    t && (x = v,
                        cn.x = Math.abs(t.x) - at.x,
                        cn.y = Math.abs(t.y) - at.y,
                        At(rt, at));
                    var a = Rt(e, !1)
                        , l = {};
                    kt("x", a, l, e),
                        kt("y", a, l, e);
                    var s = v
                        , c = {
                        x: at.x,
                        y: at.y
                    };
                    Mt(l);
                    var u = function(t) {
                            1 === t ? (v = e,
                                at.x = l.x,
                                at.y = l.y) : (v = (e - s) * t + s,
                                at.x = (l.x - c.x) * t + c.x,
                                at.y = (l.y - c.y) * t + c.y),
                            r && r(t),
                                bt(1 === t)
                        }
                        ;
                    n ? Wt("customZoomTo", 0, 1, n, i || o.easing.sine.inOut, u) : u(1)
                }
            }, jt = 30, Vt = 10, $t = -5, Yt = {}, Jt = {}, Kt = {}, Xt = {}, Qt = {}, en = {}, tn = [], nn = {}, on = 0, rn = it(), an = 0, ln = !1, sn = it(), cn = it(), un = it(), dn = function(e, t) {
                return e.x === t.x && e.y === t.y
            }
            , pn = function(e, t) {
                return Math.abs(e.x - t.x) < a && Math.abs(e.y - t.y) < a
            }
            , mn = function(e, t) {
                return nn.x = Math.abs(e.x - t.x),
                    nn.y = Math.abs(e.y - t.y),
                    Math.sqrt(nn.x * nn.x + nn.y * nn.y)
            }
            , fn = function() {
                q && (O(q),
                    q = null )
            }
            , hn = function() {
                z && (q = M(hn),
                    On())
            }
            , gn = function() {
                return v !== r.currItem.initialZoomLevel
            }
            , vn = function(e) {
                var t = e.target;
                return !(s.isInlineScrollElement(t) || s.isLinkElement(t))
            }
            , xn = function() {
                return L.isiOS && !d
            }
            , yn = function(e) {
                return s.isLinkElement(e.target)
            }
            , wn = function(e, t) {
                return t.x = e.pageX,
                    t.y = e.pageY,
                    t.id = e.identifier,
                    t
            }
            , _n = function(e, t, n) {
                n.x = .5 * (e.x + t.x),
                    n.y = .5 * (e.y + t.y)
            }
            , Tn = function(e, t, n) {
                if (e - N > 50) {
                    var i = tn.length > 2 ? tn.shift() : {};
                    i.x = t,
                        i.y = n,
                        tn.push(i),
                        N = e
                }
            }
            , bn = {}, In = {}, Cn = [], En = function(e) {
                for (; Cn.length > 0; )
                    Cn.pop();
                return e.touches.length > 0 && (Cn[0] = wn(e.touches[0], bn),
                e.touches.length > 1 && (Cn[1] = wn(e.touches[1], In))),
                    Cn
            }
            , Sn = function(e, t) {
                var n, i, o, a, l = 0, c = at[e] + t[e], u = t[e] > 0, d = sn.x + t.x, p = sn.x - en.x;
                return n = c > J.min[e] || c < J.max[e] ? s.panEndFriction : 1,
                    c = at[e] + t[e] * n,
                    !s.allowPanToNext && v !== r.currItem.initialZoomLevel || (K ? "h" !== Q || "x" !== e || H || (u ? (c > J.min[e] && (n = s.panEndFriction,
                        l = J.min[e] - c,
                        i = J.min[e] - rt[e]),
                        (0 >= i || 0 > p) && Zn() > 1 ? (a = d,
                        0 > p && d > en.x && (a = en.x)) : J.min.x !== J.max.x && (o = c)) : (c < J.max[e] && (n = s.panEndFriction,
                        l = c - J.max[e],
                        i = rt[e] - J.max[e]),
                        (0 >= i || p > 0) && Zn() > 1 ? (a = d,
                        p > 0 && d < en.x && (a = en.x)) : J.min.x !== J.max.x && (o = c))) : a = d,
                    "x" !== e) ? void (!X && !W && v > r.currItem.fitRatio && (at[e] += t[e] * n)) : (void 0 !== a && (U && a > $t && 0 > a && (a = 0),
                        Et(a, !0),
                        W = a === en.x ? !1 : !0),
                    J.min.x !== J.max.x && (void 0 !== o ? at.x = o : W || (at.x += t.x * n)),
                    void 0 !== a)
            }
            , An = function(e) {
                ln = yn(e),
                    wt("pointerDown");
                var t = En(e)
                    , n = t.length;
                U = xn(),
                    j = null ,
                    qt(),
                z && 1 !== n || (z = et = !0,
                    o.bind(window, f, r),
                    F = tt = W = B = Z = H = nt = !1,
                    Q = null ,
                    wt("firstTouchStart", t, ln),
                    At(rt, at),
                    ot.x = ot.y = 0,
                    At(Xt, t[0]),
                    At(Qt, Xt),
                    en.x = ut.x * st,
                    tn = [{
                        x: Xt.x,
                        y: Xt.y
                    }],
                    nt = s.isInlineScrollElement(e.target),
                    N = k = _t(),
                    Rt(v, !0),
                    fn(),
                    hn()),
                !V && n > 1 && !X && !W && (x = v,
                    H = !1,
                    V = Z = !0,
                    ot.y = ot.x = 0,
                    At(rt, at),
                    At(Yt, t[0]),
                    At(Jt, t[1]),
                    _n(Yt, Jt, un),
                    cn.x = Math.abs(un.x) - at.x,
                    cn.y = Math.abs(un.y) - at.y,
                    $ = Y = mn(Yt, Jt)),
                !U && vn(e) && e.preventDefault()
            }
            , Mn = function(e) {
                if ((ln || gn()) && e.preventDefault(),
                        z) {
                    var t = En(e);
                    if (Q || B || V)
                        j = t;
                    else if (sn.x !== ut.x * st)
                        Q = "h";
                    else {
                        var n = t[0].x - Xt.x
                            , i = t[0].y - Xt.y;
                        diff = Math.abs(n) - Math.abs(i),
                        Math.abs(diff) >= Vt && (Q = diff > 0 ? "h" : "v",
                            j = t)
                    }
                }
            }
            , On = function() {
                if (j) {
                    var e = j.length;
                    if (0 !== e)
                        if (At(Yt, j[0]),
                                Kt.x = Yt.x - Xt.x,
                                Kt.y = Yt.y - Xt.y,
                            1 == e) {
                            if (!Q)
                                return;
                            if (et && (wt("firstMove"),
                                    et = !1,
                                Math.abs(Kt.x) >= Vt && (Kt.x -= j[0].x - Qt.x),
                                Math.abs(Kt.y) >= Vt && (Kt.y -= j[0].y - Qt.y)),
                                    Xt.x = Yt.x,
                                    Xt.y = Yt.y,
                                0 === Kt.x && 0 === Kt.y)
                                return;
                            Tn(_t(), Yt.x, Yt.y),
                                B = !0,
                                J = r.currItem.bounds;
                            var t = Sn("x", Kt);
                            t || (Sn("y", Kt),
                                Mt(at),
                                bt())
                        } else if (V && e > 1) {
                            if (Xt.x = Yt.x,
                                    Xt.y = Yt.y,
                                !Kt.x && !Kt.y && dn(j[1], Jt))
                                return;
                            At(Jt, j[1]),
                            H || (H = !0,
                                wt("zoomGestureStarted"));
                            var n = mn(Yt, Jt)
                                , i = Nn(n);
                            i > r.currItem.initialZoomLevel + r.currItem.initialZoomLevel / 15 && (tt = !0);
                            var o = 1
                                , a = Dt()
                                , l = Lt();
                            a > i ? (o = (a - i) / a,
                            o > 1 && (o = 1),
                                i = a - o * (a / 3)) : i > l && (o = (i - l) / (6 * a),
                            o > 1 && (o = 1),
                                i = l + o * a),
                            0 > o && (o = 0),
                                $ = n,
                                _n(Yt, Jt, rn),
                                ot.x += rn.x - un.x,
                                ot.y += rn.y - un.y,
                                At(un, rn),
                                at.x = St("x", i),
                                at.y = St("y", i),
                                F = i > v,
                                v = i,
                                bt()
                        }
                }
            }
            , Rn = function(e) {
                var t, n, i = En(e), a = i.length;
                if (!nt || 1 != a) {
                    if (L.isOldAndroid && e.type.indexOf("touch") > -1 && (clearTimeout(P),
                            P = setTimeout(function() {
                                P = 0
                            }, 600)),
                            wt("pointerUp"),
                        vn(e) && e.preventDefault(),
                        2 === a)
                        return j = null ,
                            !0;
                    1 === a && At(Qt, i[0]),
                    0 !== a || Q || X || (t || e.changedTouches && e.changedTouches[0] && (t = {
                        x: e.changedTouches[0].pageX,
                        y: e.changedTouches[0].pageY,
                        type: "touch"
                    }),
                    ln || wt("touchRelease", e, t));
                    var l = -1;
                    if (0 === a && (z = !1,
                            o.unbind(window, f, r),
                            fn(),
                            V ? l = 0 : -1 !== an && (l = _t() - an)),
                            an = 1 === a ? _t() : -1,
                            n = -1 !== l && 150 > l ? "zoom" : "swipe",
                        V && 2 > a && (V = !1,
                        1 === a && (n = "zoomPointerUp"),
                            wt("zoomGestureEnded")),
                            j = null ,
                        !B && !H && !X)
                        return void (ln && wt("click", e));
                    if (qt(),
                        G || (G = Dn()),
                            G.calculateSwipeSpeed("x"),
                        (W || X) && 0 === a) {
                        var s = kn(n, G);
                        if (s)
                            return;
                        n = "zoomPointerUp"
                    }
                    if (!X)
                        return "swipe" !== n ? void Gn() : void (!W && v > r.currItem.fitRatio && Ln(G))
                }
            }
            , Dn = function() {
                var e, t, n = {
                    lastFlickOffset: {},
                    lastFlickDist: {},
                    lastFlickSpeed: {},
                    slowDownRatio: {},
                    slowDownRatioReverse: {},
                    speedDecelerationRatio: {},
                    speedDecelerationRatioAbs: {},
                    distanceOffset: {},
                    backAnimDestination: {},
                    backAnimStarted: {},
                    calculateSwipeSpeed: function(i) {
                        tn.length > 1 ? (e = _t() - N + 50,
                            t = tn[tn.length - 2][i]) : (e = _t() - k,
                            t = Qt[i]),
                            n.lastFlickOffset[i] = Xt[i] - t,
                            n.lastFlickDist[i] = Math.abs(n.lastFlickOffset[i]),
                            n.lastFlickSpeed[i] = n.lastFlickDist[i] > 20 ? n.lastFlickOffset[i] / e : 0,
                        Math.abs(n.lastFlickSpeed[i]) < .1 && (n.lastFlickSpeed[i] = 0),
                            n.slowDownRatio[i] = .95,
                            n.slowDownRatioReverse[i] = 1 - n.slowDownRatio[i],
                            n.speedDecelerationRatio[i] = 1
                    },
                    calculateOverBoundsAnimOffset: function(e, t) {
                        n.backAnimStarted[e] || (at[e] > J.min[e] ? n.backAnimDestination[e] = J.min[e] : at[e] < J.max[e] && (n.backAnimDestination[e] = J.max[e]),
                        void 0 !== n.backAnimDestination[e] && (n.slowDownRatio[e] = .7,
                            n.slowDownRatioReverse[e] = 1 - n.slowDownRatio[e],
                        n.speedDecelerationRatioAbs[e] < .05 && (n.lastFlickSpeed[e] = 0,
                            n.backAnimStarted[e] = !0,
                            Wt("bounceZoomPan" + e, at[e], n.backAnimDestination[e], t || 300, o.easing.sine.out, function(t) {
                                at[e] = t,
                                    bt()
                            }))))
                    },
                    calculateAnimOffset: function(e) {
                        n.backAnimStarted[e] || (n.speedDecelerationRatio[e] = n.speedDecelerationRatio[e] * (n.slowDownRatio[e] + n.slowDownRatioReverse[e] - n.slowDownRatioReverse[e] * n.timeDiff / 10),
                            n.speedDecelerationRatioAbs[e] = Math.abs(n.lastFlickSpeed[e] * n.speedDecelerationRatio[e]),
                            n.distanceOffset[e] = n.lastFlickSpeed[e] * n.speedDecelerationRatio[e] * n.timeDiff,
                            at[e] += n.distanceOffset[e])
                    },
                    panAnimLoop: function() {
                        return zt.zoomPan && (zt.zoomPan.raf = M(n.panAnimLoop),
                            n.now = _t(),
                            n.timeDiff = n.now - n.lastNow,
                            n.lastNow = n.now,
                            n.calculateAnimOffset("x"),
                            n.calculateAnimOffset("y"),
                            bt(),
                            n.calculateOverBoundsAnimOffset("x"),
                            n.calculateOverBoundsAnimOffset("y"),
                        n.speedDecelerationRatioAbs.x < .05 && n.speedDecelerationRatioAbs.y < .05) ? (at.x = Math.round(at.x),
                            at.y = Math.round(at.y),
                            bt(),
                            void Ht("zoomPan")) : void 0
                    }
                };
                return n
            }
            , Ln = function(e) {
                return e.calculateSwipeSpeed("y"),
                    J = r.currItem.bounds,
                    e.backAnimDestination = {},
                    e.backAnimStarted = {},
                    Math.abs(e.lastFlickSpeed.x) <= .05 && Math.abs(e.lastFlickSpeed.y) <= .05 ? (e.speedDecelerationRatioAbs.x = e.speedDecelerationRatioAbs.y = 0,
                        e.calculateOverBoundsAnimOffset("x"),
                        e.calculateOverBoundsAnimOffset("y"),
                        !0) : (Bt("zoomPan"),
                        e.lastNow = _t(),
                        void e.panAnimLoop())
            }
            , kn = function(e, t) {
                var n;
                X || (on = d);
                var i;
                if ("swipe" === e) {
                    var a = Xt.x - Qt.x
                        , l = t.lastFlickDist.x < 10;
                    a > jt && (l || t.lastFlickOffset.x > 20) ? i = -1 : -jt > a && (l || t.lastFlickOffset.x < -20) && (i = 1)
                }
                var s;
                i && (d += i,
                    0 > d ? (d = 0,
                        s = !0) : d >= Zn() && (d = Zn() - 1,
                        s = !0),
                s || (dt += i,
                    st -= i,
                    n = !0));
                var c, u = ut.x * st, p = Math.abs(u - sn.x);
                return n || u > sn.x == t.lastFlickSpeed.x > 0 ? (c = Math.abs(t.lastFlickSpeed.x) > 0 ? p / Math.abs(t.lastFlickSpeed.x) : 333,
                    c = Math.min(c, 400),
                    c = Math.max(c, 250)) : c = 333,
                on === d && (n = !1),
                    X = !0,
                    wt("mainScrollAnimStart"),
                    Wt("mainScroll", sn.x, u, c, o.easing.cubic.out, Et, function() {
                        qt(),
                            X = !1,
                            on = -1,
                        (n || on !== d) && r.updateCurrItem(),
                            wt("mainScrollAnimComplete")
                    }),
                n && r.updateCurrItem(!0),
                    n
            }
            , Nn = function(e) {
                return 1 / Y * e * x
            }
            , Gn = function() {
                var e = v
                    , t = Dt()
                    , n = Lt();
                return t > v ? e = t : v > n && (e = n),
                    r.zoomTo(e, 0, 200, o.easing.cubic.out, null ),
                    !0
            }
            ;
        document.querySelector(".pswp__title")
    }
    gt("Gestures", {
        publicMethods: {
            initGestures: function() {
                I = "touchstart",
                    C = "touchmove",
                    E = "touchend",
                    S = "touchcancel",
                    f = C + " " + E + " " + S,
                    h = I,
                    g[I] = An,
                    g[C] = Mn,
                    g[E] = Rn,
                    g[S] = Rn
            }
        }
    });
    var Fn, Pn, zn, Zn, Hn = function(t, n) {
            Pn = !0,
                v = t.initialZoomLevel,
                At(at, t.initialPosition),
                bt(),
                e.style.opacity = 1,
                Ht("initialZoom"),
            n && (n.style.display = "block"),
                o.addClass(e, "pswp--animated-in"),
                wt("initialZoomInEnd")
        }
        , Bn = {}, qn = [], Wn = 0, Un = {
            index: 0,
            errorMsg: '<div class="pswp__error-msg"><button class="pswp__error-retry">点击重试</button></div>',
            preload: [0, 0],
            getNumItemsFn: function() {
                return Fn.length
            },
            getCountItemsFn: function() {
                for (var e = Fn.length, t = 0; t < Fn.length; t++)
                    0 == Fn[t].count && (e -= 1);
                return e
            }
        }, jn = function() {
            return {
                center: {
                    x: 0,
                    y: 0
                },
                max: {
                    x: 0,
                    y: 0
                },
                min: {
                    x: 0,
                    y: 0
                }
            }
        }
        , Vn = function(e, t, n) {
            var i = e.bounds;
            i.center.x = Math.round((Bn.x - t) / 2),
                i.center.y = Math.round((Bn.y - n) / 2) + e.vGap.top,
                i.max.x = t > Bn.x ? Math.round(Bn.x - t) : i.center.x,
                i.max.y = n > Bn.y ? Math.round(Bn.y - n) + e.vGap.top : i.center.y,
                i.min.x = t > Bn.x ? 0 : i.center.x,
                i.min.y = n > Bn.y ? e.vGap.top : i.center.y
        }
        , $n = function(e, t, n) {
            if (e.src && !e.loadError) {
                var i = !n;
                if (i && (e.vGap || (e.vGap = {
                        top: 0,
                        bottom: 0
                    }),
                        wt("parseVerticalMargin", e)),
                        Bn.x = t.x,
                        Bn.y = t.y - e.vGap.top - e.vGap.bottom,
                        i) {
                    var o = Bn.x / e.w
                        , r = Bn.y / e.h;
                    e.fitRatio = Math.min(o, r),
                        n = e.fitRatio,
                    n > 1 && (n = 1),
                        e.initialZoomLevel = n,
                    e.bounds || (e.bounds = jn())
                }
                if (!n)
                    return;
                return Vn(e, e.w * n, e.h * n),
                i && n === e.initialZoomLevel && (e.initialPosition = e.bounds.center),
                    e.bounds
            }
            return e.w = e.h = 0,
                e.initialZoomLevel = e.fitRatio = 1,
                e.bounds = jn(),
                e.initialPosition = e.bounds.center,
                e.bounds
        }
        , Yn = function(e) {
            var t = e.container.firstElementChild;
            if (t) {
                if (e.w = t.offsetWidth,
                        e.h = t.offsetHeight,
                        !o.features.boxAlign) {
                    var n = (e.container.offsetHeight - t.offsetHeight) / 2;
                    e.container.style.transform = "translate3d(0," + n + "px,0)"
                }
                e.vGap = {
                    top: 0,
                    bottom: 0
                },
                    e.fitRatio = 1,
                    e.initialZoomLevel = 1,
                    e.bounds = jn()
            }
        }
        , Jn = function(e, t, n, i, o, r) {
            t.loadError || i && (t.imageAppended = !0,
                Qn(t, i),
                n.appendChild(i),
            r && setTimeout(function() {
                t && t.loaded && t.placeholder && (t.placeholder.style.display = "none",
                    t.placeholder = null )
            }, 500))
        }
        , Kn = function(e) {
            e.loading = !0,
                e.loaded = !1;
            var t = e.img = o.createEl("pswp__img", "img")
                , n = function() {
                    e.loading = !1,
                        e.loaded = !0,
                    e.w != t.naturalWidth && (e.w = t.naturalWidth,
                        e.h = t.naturalHeight,
                        $n(e, lt),
                        Qn(e, t),
                        It(e),
                        r.updateCurrZoomItem()),
                        e.loadComplete ? e.loadComplete(e) : e.img = null ,
                        t.onload = t.onerror = null ,
                        t = null ,
                        Wn--
                }
                ;
            return t.onload = function() {
                n(),
                    wt("imageSuccess", this.src, o.timestamp() - this.startLoadingTime)
            }
                ,
                t.onerror = function() {
                    e.loadError = !0,
                        n(),
                        wt("imageError", this.src)
                }
                ,
                t.src = e.src,
                t.startLoadingTime = o.timestamp(),
                Wn++,
                t
        }
        , Xn = function(e, t) {
            return e.src && e.loadError && e.container ? (t && (e.container.innerHTML = ""),
                e.container.innerHTML = s.errorMsg.replace("%url%", e.src),
                !0) : void 0
        }
        , Qn = function(e, t, n) {
            if (e.src) {
                t || (t = e.container.lastChild);
                var i = n ? e.w : Math.round(e.w * e.fitRatio)
                    , o = n ? e.h : Math.round(e.h * e.fitRatio);
                e.placeholder && !e.loaded && (e.placeholder.style.width = i + "px",
                    e.placeholder.style.height = o + "px"),
                    t.style.width = i + "px",
                    t.style.height = o + "px"
            }
        }
        , ei = function() {
            if (qn.length) {
                for (var e, t = 0; t < qn.length; t++)
                    e = qn[t],
                    e.holder.index === e.index && Jn(e.index, e.item, e.baseDiv, e.img, !1, e.clearPlaceholder);
                qn = []
            }
        }
        ;
    gt("Controller", {
        publicMethods: {
            initController: function() {
                o.extend(s, Un, !0),
                    r.items = Fn = n,
                    zn = r.getItemAt,
                    Zn = s.getNumItemsFn,
                    yt("mainScrollAnimComplete", ei),
                    yt("initialZoomInEnd", ei)
            },
            lazyLoadItem: function(e) {
                e = vt(e);
                var t = zn(e);
                t && t.src && !t.loaded && !t.loading && Kn(t)
            },
            getItemAt: function(e) {
                return e >= 0 && void 0 !== Fn[e] ? Fn[e] : !1
            },
            isLoading: function() {
                return !!Wn
            },
            setContent: function(e, t) {
                var n = r.getItemAt(e.index);
                n && (n.container = null );
                var i, a = r.getItemAt(t);
                if (!a)
                    return void (e.el.innerHTML = "");
                e.index = t,
                    e.item = a;
                var l = a.container = o.createEl("pswp__zoom-wrap");
                if (!a.src && a.html && (a.html.tagName ? l.appendChild(a.html) : l.innerHTML = a.html),
                        a.src) {
                    if (Xn(a),
                            $n(a, lt),
                            !a.loadError)
                        if (a.loaded)
                            i = o.createEl("pswp__img", "img"),
                                i.style.opacity = 1,
                                i.src = a.src,
                                Jn(t, a, l, i, !0);
                        else {
                            if (a.loadComplete = function(n) {
                                    if (c) {
                                        if (e && e.index === t) {
                                            if (Xn(n, !0))
                                                return n.loadComplete = n.img = null ,
                                                    $n(n, lt),
                                                    It(n),
                                                    void (e.index === d && r.updateCurrZoomItem());
                                            n.imageAppended ? n.placeholder && (n.placeholder.style.display = "none",
                                                n.placeholder = null ) : L.transform && X ? qn.push({
                                                item: n,
                                                baseDiv: l,
                                                img: n.img,
                                                index: t,
                                                holder: e,
                                                clearPlaceholder: !0
                                            }) : Jn(t, n, l, n.img, X, !0)
                                        }
                                        n.loadComplete = null ,
                                            n.img = null ,
                                            wt("imageLoadComplete", t, n)
                                    }
                                }
                                    ,
                                    o.features.transform) {
                                var s = "pswp__img pswp__img--placeholder";
                                s += a.msrc ? "" : " pswp__img--placeholder--blank";
                                var u = o.createEl(s, a.msrc ? "img" : "");
                                a.msrc && (u.src = a.msrc),
                                    l.appendChild(u),
                                    a.placeholder = u
                            }
                            a.loading || Kn(a)
                        }
                    Pn || t !== d ? It(a) : (K = l.style,
                        Hn(a, i || a.img))
                }
                e.el.innerHTML = "",
                    e.el.appendChild(l),
                a.html && Yn(a)
            },
            cleanSlide: function(e) {
                e.img && (e.img.onload = e.img.onerror = null ),
                    e.loaded = e.loading = e.img = e.imageAppended = !1
            },
            addRelatedSlides: function(e) {
                e && e instanceof Array && e.length && r.items.push({
                    html: getRelateSlidesHTML(e),
                    events: "default",
                    zoom: !1,
                    canPan: !1,
                    controls: !1,
                    count: !1
                })
            },
            setDescriptionPadding: function(e) {
                if (e && "number" == typeof e) {
                    var t = document.createElement("style");
                    t.innerHTML = ".pswp__relate, .pswp__bottom-bar{ padding-left:" + e + "px; padding-right:" + e + "px}",
                        document.head.appendChild(t)
                }
            },
            showBottomGap: function() {
                var e = document.querySelector(".pswp__bottom-bar");
                e.style.paddingBottom = "48px"
            },
            hideBottomGap: function() {
                var e = document.querySelector(".pswp__bottom-bar");
                e.style.paddingBottom = "10px"
            }
        }
    });
    var ti, ni, ii, oi = 1e3, ri = 300, ai = {}, li = function(e, t, n) {
            var i = document.createEvent("CustomEvent")
                , o = {
                origEvent: e,
                target: e.target,
                releasePoint: t,
                pointerType: "touch"
            };
            i.initCustomEvent(n, !0, !0, o),
                e.target.dispatchEvent(i)
        }
        , si = function() {
            return +new Date
        }
        , ci = function(e) {
            e && (clearTimeout(e),
                e = null )
        }
        ;
    gt("Tap", {
        publicMethods: {
            initTap: function() {
                yt("firstTouchStart", r.onTapStart),
                    yt("firstMove", r.onFirstMove),
                    yt("zoomGestureStarted", r.onFirstMove),
                    yt("touchRelease", r.onTapRelease),
                L.isiOS && L.isToutiao && yt("click", r.onClick)
            },
            onClick: function(e) {
                e.target.href && (location.href = e.target.href)
            },
            onTapStart: function(e, t) {
                e.length && !t && (ci(ti),
                1 == e.length && (ii = si(),
                    ci(ni),
                    ni = setTimeout(function() {
                        wt("longTap"),
                            ci(ni)
                    }, oi)))
            },
            onFirstMove: function() {
                ci(ni)
            },
            onTapRelease: function(e, t) {
                if (t && !B && !Z && !Zt) {
                    ci(ni);
                    var n = t;
                    if (ti && (clearTimeout(ti),
                            ti = null ,
                            pn(n, ai)))
                        return void wt("doubleTap", n);
                    if (ii && si() - ii > ri)
                        return void (ii = null );
                    At(ai, n),
                        ti = setTimeout(function() {
                            li(e, t, "tap"),
                                ti = null
                        }, ri)
                }
            }
        }
    }),
        o.extend(r, Ut)
}
function TTGalleryInit() {
    function e(e, t, n, i) {
        var o = "bytedance://" + (r.isAndroid ? "log_event" : "custom_event") + "?category=umeng&tag=" + e + "&label=" + t;
        "undefined" != typeof n && (o = o + "&value=" + n),
        "undefined" != typeof i && (o = o + "&extra=" + i),
            r.isAndroid ? console.log(o) : location.href = o
    }
    function t(e) {
        e = e || {};
        var t = navigator.userAgent.match(/NetType\/([^\s]*)/i)
            , n = "WIFI";
        if (t && (n = t[1]),
            "object" == typeof performance) {
            var i = (performance.timing,
                o.extend({
                    net_type: n,
                    hostname: location.hostname,
                    pathname: encodeURIComponent(location.pathname)
                }, e))
                , r = document.querySelector("meta[name=pathname]");
            r && (i.pathname = r.content);
            var a = [];
            for (k in i)
                a.push(k + "=" + i[k]);
            var l = new Image
                , s = "http://toutiao.com/__utm.gif?" + a.join("&");
            console.log("image: " + s),
                l.src = s
        }
    }
    function n() {
        l(c, function() {
            ToutiaoJSBridge.call("slideShow", {
                image_url: TTGallery.currItem.src,
                cur_index: 0,
                all_pic: u
            })
        })
    }
    var i = {
        indexIndicatorSep: "/",
        history: !1,
        maxSpreadZoom: 2,
        pinchToClose: !1,
        closeOnVerticalDrag: !1
    };
    window.TTGallery = new PhotoSwipe(TTGallery.rootElement,TTGallery.UIDefault,TTGallery.items,i,TTGallery.title),
        TTGallery.init();
    var o = TTGallery.framework
        , r = o.features
        , a = o.hash
        , l = o.loadScript
        , s = TTGallery.listen;
    if (r.isToutiao) {
        console.log("bytedance://disable_swipe");
        var c = "http://s2.pstatp.com/inapp/toutiao.js?ver=0917"
            , u = TTGallery.items.length
            , d = 0
            , p = 0
            , m = !1
            , f = (a("category_name"),
            a("group_id"));
        document.addEventListener("DOMContentLoaded", function() {
            r.isiOS && (location.href = "bytedance://domReady"),
                setTimeout(n, 500)
        }, !1),
            s("afterChange", function() {
                p = TTGallery.getCurrentIndex(),
                    d = Math.max(d, p);
                var t = JSON.stringify({
                    all_pic: u
                })
                    , n = u > p;
                n ? e("slide_detail", "slide_pic", p, t) : p == u && (m || e("slide_detail", "related_show", f),
                    m = !0),
                "object" == typeof ToutiaoJSBridge && (n ? ToutiaoJSBridge.call("slideShow", {
                    image_url: TTGallery.currItem.src,
                    cur_index: p,
                    all_pic: u
                }) : ToutiaoJSBridge.call("relatedShow"))
            }),
            s("imageError", function(e) {
                t({
                    imageStatus: "error",
                    imageSrc: encodeURIComponent(e)
                })
            }),
            s("imageSuccess", function(e, n) {
                t({
                    imageStatus: "success",
                    imageSrc: encodeURIComponent(e),
                    imageLoadTime: n
                })
            }),
            s("zoomIn", function() {
                e("slide_detail", "zoom_in")
            }),
            s("showControls", function() {
                e("slide_detail", "show_content")
            }),
            s("longTap", function() {
                if ("object" == typeof ToutiaoJSBridge) {
                    if (TTGallery.isLoading())
                        return;
                    var e = TTGallery.currItem;
                    e.src && e.loaded && ToutiaoJSBridge.call("slideDownload", {
                        image_url: TTGallery.currItem.src
                    })
                }
            })
    }
    s("afterChange", function() {
        var e = "object" == typeof window.TTGalleryEvents ? window.TTGalleryEvents : {};
        e.afterChange && e.afterChange.call(TTGallery)
    })
}
var TTGallery = {};
TTGallery.container = document.querySelector("#gallery"),
    TTGallery.support = !0,
    function() {
        var e = navigator.userAgent
            , t = /News_?Article/gi.test(e)
            , n = /MiuiBrowser/.test(e)
            , i = /MicroMessenger/g.test(e)
            , o = /explore_?article/gi.test(e)
            , r = !/Android|iPhone|iPad|iPod/gi.test(e);
        if ((n || i || o || r) && (TTGallery.support = !1),
                t) {
            var a = /News_?Article\/([^\s]*)/i.exec(e);
            a && (TTGallery.support = parseFloat(a[1]) >= 4.9)
        }
        return location.hash.indexOf("support_gallery=true") > 0 && (TTGallery.support = !0),
            TTGallery.support ? void 0 : void TTArticleInit(TTGallery.container)
    }(),
    !function() {
        function e() {
            function e() {
                var e = i.match(/NetType\/([^\s]*)/i)
                    , t = "WIFI";
                return e && (t = e[1]),
                    t
            }
            if ("object" == typeof performance) {
                var t = performance.timing
                    , n = "http://toutiao.com/__utm.gif"
                    , i = navigator.userAgent
                    , o = e()
                    , r = {
                    net_type: o,
                    hostname: location.hostname,
                    domready: t.domInteractive - t.navigationStart,
                    url: encodeURIComponent(location.href)
                }
                    , a = document.querySelector("meta[name=pathname]");
                a && (r.pathname = a.content);
                var l = [];
                for (k in r)
                    l.push(k + "=" + r[k]);
                var s = new Image
                    , c = n + "?" + l.join("&");
                console.log("performance:", c),
                    s.src = c
            }
        }
        setTimeout(e, 1e3)
    }(),
    !function() {
        function e(e) {
            if (e)
                for (var o = e.firstElementChild; o; ) {
                    if (!o.getAttribute(f) && !i(o))
                        if (o.setAttribute(f, f),
                                t(o, !0))
                            n(o, c.NOT_MUTATION_OBSERVER, !0);
                        else if (o.childElementCount)
                            for (var r = o.querySelectorAll(m), a = r.length, l = 0; a > l; l++) {
                                var s = r[l];
                                !i(s) && t(s, !0) && n(s, c.NOT_MUTATION_OBSERVER, !0)
                            }
                    o = o.nextElementSibling
                }
        }
        function t(e, t) {
            return e && e.nodeType == c.ELEMENT_NODE_TYPE ? t ? "fixed" == e.style.position || "fixed" == getComputedStyle(e).position : "fixed" == e.style.position : !1
        }
        function n(e) {
            e && e.parentNode.removeChild(e)
        }
        function i(e) {
            if (!e || e.nodeType != c.ELEMENT_NODE_TYPE)
                return !0;
            var t = e.getAttribute(h);
            if (t)
                return !0;
            var n = e.tagName.toLowerCase()
                , i = e.id
                , o = e.className
                , r = !1;
            return r = u.tag.indexOf(n) >= 0,
            r || (r = u.id.indexOf(i) >= 0),
            r || (r = u.classReg.test(o)),
            r && e.setAttribute(h, h),
                r
        }
        function o() {
            var t = 30
                , n = 100
                , i = 0
                , o = 0;
            i = setInterval(function() {
                e(document.documentElement),
                    e(document.body),
                ++o >= t && clearInterval(i)
            }, n)
        }
        function r() {
            var e = window.MutationObserver || window.WebKitMutationObserver
                , o = !!e;
            if (o) {
                var r = !0;
                d.indexOf(location.hostname) > -1 && (r = !1);
                var l = new e(function(e) {
                        e.forEach(function(e) {
                            for (var o = e.addedNodes, l = o.length, s = 0; l > s; s++) {
                                var u = o[s];
                                i(u) || (t(u, !0) ? n(u, c.MUTATION_OBSERVER, !0) : r && a(u) && n(u, c.MUTATION_OBSERVER, !1))
                            }
                        })
                    }
                )
                    , s = {
                    attributes: !1,
                    childList: !0,
                    characterData: !1,
                    subtree: !0
                };
                l.observe(document, s)
            }
        }
        function a(e) {
            if (!e || e.nodeType != c.ELEMENT_NODE_TYPE)
                return !1;
            var t = /[_-]ad|ad[_-]|[_-]ads|ads[_-]|ads\d+|[_-]close|close[_-]/i
                , n = e.outerHTML
                , i = e.innerText;
            return t.test(n) && !t.test(i)
        }
        function l() {
            window.alert = function() {}
        }
        function s() {
            try {
                if (p.indexOf(location.hostname) > -1)
                    return;
                l(),
                    o(),
                    r()
            } catch (e) {}
        }
    }();
